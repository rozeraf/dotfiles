diff --git a/init.lua b/init.lua
index 910e3de..e70bfe2 100644
--- a/init.lua
+++ b/init.lua
@@ -28,12 +28,18 @@ vim.g.mapleader = " "
 vim.g.maplocalleader = " "
 vim.keymap.set({ "n", "v" }, "<leader>y", '"+y')
 vim.keymap.set({ "n", "v" }, "<leader>p", '"+p')
--- d удаляет в никуда
-vim.keymap.set({ "n", "v" }, "d", '"_d')
-vim.keymap.set("n", "dd", '"_dd')
+-- d/x удаляют в никуда, кроме terminal-буферов (modifiable=false)
+vim.keymap.set({ "n", "v" }, "d", function()
+	return vim.bo.buftype == "terminal" and "d" or '"_d'
+end, { expr = true })
+vim.keymap.set("n", "dd", function()
+	return vim.bo.buftype == "terminal" and "dd" or '"_dd'
+end, { expr = true })
 
 -- x тоже
-vim.keymap.set({ "n", "v" }, "x", '"_x')
+vim.keymap.set({ "n", "v" }, "x", function()
+	return vim.bo.buftype == "terminal" and "x" or '"_x'
+end, { expr = true })
 
 -- leader+d — явное вырезание (в буфер обмена)
 vim.keymap.set({ "n", "v" }, "<leader>d", '"+d')
@@ -111,6 +117,33 @@ else
     hi signcolumn   guibg=none ctermbg=none
   ]])
 
+	-- floating-окна: свой фон, не сливается с #202020
+	local function apply_float_hl()
+		local bg   = "#252535"
+		local bord = "#45475a"
+		local fg   = "#cdd6f4"
+		vim.api.nvim_set_hl(0, "NormalFloat",            { bg = bg,        fg = fg })
+		vim.api.nvim_set_hl(0, "FloatBorder",            { bg = bg,        fg = bord })
+		vim.api.nvim_set_hl(0, "FloatTitle",             { bg = bg,        fg = "#89b4fa", bold = true })
+		vim.api.nvim_set_hl(0, "TelescopeNormal",        { bg = bg,        fg = fg })
+		vim.api.nvim_set_hl(0, "TelescopeBorder",        { bg = bg,        fg = bord })
+		vim.api.nvim_set_hl(0, "TelescopePromptNormal",  { bg = "#2a2a3d", fg = fg })
+		vim.api.nvim_set_hl(0, "TelescopePromptBorder",  { bg = "#2a2a3d", fg = bord })
+		vim.api.nvim_set_hl(0, "TelescopePromptTitle",   { bg = "#2a2a3d", fg = "#89b4fa", bold = true })
+		vim.api.nvim_set_hl(0, "TelescopePreviewTitle",  { bg = bg,        fg = "#a6e3a1", bold = true })
+		vim.api.nvim_set_hl(0, "TelescopeResultsTitle",  { bg = bg,        fg = "#cba6f7", bold = true })
+		vim.api.nvim_set_hl(0, "Pmenu",                  { bg = bg,        fg = fg })
+		vim.api.nvim_set_hl(0, "PmenuSel",               { bg = "#313244", fg = fg, bold = true })
+		vim.api.nvim_set_hl(0, "PmenuSbar",              { bg = "#313244" })
+		vim.api.nvim_set_hl(0, "PmenuThumb",             { bg = "#585b70" })
+		-- TabLine: системные уголки bufferline
+		vim.api.nvim_set_hl(0, "TabLine",                { bg = "NONE", fg = "#585b70" })
+		vim.api.nvim_set_hl(0, "TabLineSel",             { bg = "NONE", fg = "#cdd6f4", bold = true })
+		vim.api.nvim_set_hl(0, "TabLineFill",            { bg = "NONE" })
+	end
+	apply_float_hl()
+	vim.api.nvim_create_autocmd("ColorScheme", { pattern = "*", callback = apply_float_hl })
+
 	-- lsp keymaps (применяются при attach)
 	vim.api.nvim_create_autocmd("lspattach", {
 		callback = function(event)
@@ -731,38 +764,101 @@ else
 			version = "*",
 			dependencies = { "nvim-tree/nvim-web-devicons" },
 			config = function()
+				-- catppuccin-mocha palette; bg="NONE" везде для прозрачности
+				local c = {
+					base     = "NONE",
+					surface0 = "#313244",
+					surface1 = "#45475a",
+					surface2 = "#585b70",
+					overlay1 = "#7f849c",
+					text     = "#cdd6f4",
+					subtext1 = "#bac2de",
+					blue     = "#89b4fa",
+					red      = "#f38ba8",
+					yellow   = "#f9e2af",
+					green    = "#a6e3a1",
+					pink     = "#f5c2e7",
+				}
+				local hl = {
+					fill                        = { bg = c.base },
+					background                  = { fg = c.overlay1,  bg = c.base },
+					buffer_selected             = { fg = c.text,      bg = c.base, bold = true, italic = false },
+					indicator_selected          = { fg = c.blue,      bg = c.base },
+					buffer_visible              = { fg = c.subtext1,  bg = c.base },
+					indicator_visible           = { fg = c.surface1,  bg = c.base },
+					separator                   = { fg = c.surface0,  bg = c.base },
+					separator_selected          = { fg = c.surface0,  bg = c.base },
+					separator_visible           = { fg = c.surface0,  bg = c.base },
+					numbers                     = { fg = c.surface2,  bg = c.base },
+					numbers_selected            = { fg = c.blue,      bg = c.base, bold = true },
+					numbers_visible             = { fg = c.overlay1,  bg = c.base },
+					close_button                = { fg = c.surface2,  bg = c.base },
+					close_button_selected       = { fg = c.red,       bg = c.base },
+					close_button_visible        = { fg = c.overlay1,  bg = c.base },
+					modified                    = { fg = c.yellow,    bg = c.base },
+					modified_selected           = { fg = c.yellow,    bg = c.base },
+					modified_visible            = { fg = c.yellow,    bg = c.base },
+					pin_button                  = { fg = c.overlay1,  bg = c.base },
+					pin_button_selected         = { fg = c.pink,      bg = c.base },
+					pin_button_visible          = { fg = c.overlay1,  bg = c.base },
+					error                       = { fg = c.red,       bg = c.base },
+					error_selected              = { fg = c.red,       bg = c.base, bold = true },
+					error_diagnostic            = { fg = c.red,       bg = c.base },
+					error_diagnostic_selected   = { fg = c.red,       bg = c.base },
+					warning                     = { fg = c.yellow,    bg = c.base },
+					warning_selected            = { fg = c.yellow,    bg = c.base, bold = true },
+					warning_diagnostic          = { fg = c.yellow,    bg = c.base },
+					warning_diagnostic_selected = { fg = c.yellow,    bg = c.base },
+					info                        = { fg = c.blue,      bg = c.base },
+					info_selected               = { fg = c.blue,      bg = c.base, bold = true },
+					info_diagnostic             = { fg = c.blue,      bg = c.base },
+					info_diagnostic_selected    = { fg = c.blue,      bg = c.base },
+					hint                        = { fg = c.green,     bg = c.base },
+					hint_selected               = { fg = c.green,     bg = c.base, bold = true },
+					hint_diagnostic             = { fg = c.green,     bg = c.base },
+					hint_diagnostic_selected    = { fg = c.green,     bg = c.base },
+					diagnostic                  = { fg = c.overlay1,  bg = c.base },
+					diagnostic_selected         = { fg = c.overlay1,  bg = c.base },
+					offset_separator            = { fg = c.surface0,  bg = c.base },
+					tab                         = { fg = c.overlay1,  bg = c.base },
+					tab_selected                = { fg = c.blue,      bg = c.base, bold = true },
+					tab_close                   = { fg = c.red,       bg = c.base },
+					trunc_marker                = { fg = c.surface2,  bg = c.base },
+				}
 				require("bufferline").setup({
+					highlights = hl,
 					options = {
 						mode = "buffers",
-						separator_style = "slant",
+						numbers = "ordinal",
+						-- пустые разделители убирают любые glyph-уголки
+						separator_style = { "", "" },
+						indicator = { icon = "▎", style = "icon" },
 						diagnostics = "nvim_lsp",
 						diagnostics_indicator = function(_, _, diag)
 							local s = ""
-							if diag.error then
-								s = s .. " " .. diag.error
-							end
-							if diag.warning then
-								s = s .. " " .. diag.warning
-							end
+							if diag.error   then s = s .. " " .. diag.error   end
+							if diag.warning then s = s .. " " .. diag.warning end
 							return s
 						end,
 						offsets = {
 							{
-								filetype = "neo-tree",
-								text = "File Explorer",
+								filetype  = "neo-tree",
+								text      = "File Explorer",
 								highlight = "Directory",
-								separator = true,
+								separator = false,
 							},
 						},
 						show_buffer_close_icons = true,
-						show_close_icon = false,
-						color_icons = true,
+						show_close_icon         = false,
+						color_icons             = true,
+						always_show_bufferline  = true,
+						hover = { enabled = true, delay = 150, reveal = { "close" } },
 					},
 				})
 				-- навигация между буферами
 				vim.keymap.set("n", "<S-l>", "<cmd>BufferLineCycleNext<cr>", { desc = "next buffer" })
 				vim.keymap.set("n", "<S-h>", "<cmd>BufferLineCyclePrev<cr>", { desc = "prev buffer" })
-				vim.keymap.set("n", "<leader>bd", "<cmd>bdelete<cr>", { desc = "close buffer" })
+				vim.keymap.set("n", "<leader>bd", "<cmd>bdelete<cr>",             { desc = "close buffer" })
 				vim.keymap.set("n", "<leader>bp", "<cmd>BufferLineTogglePin<cr>", { desc = "pin buffer" })
 				-- прыжок по номеру (1-9)
 				for i = 1, 9 do
